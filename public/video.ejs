<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= video.snippet.title %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="./assets/images/icons/logo-icon.svg" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body class="flex flex-col bg-gray-100 relative">
    <div
      id="disable-page"
      class="
        top-0
        bottom-0
        w-full
        absolute
        z-10
        bg-black
        transition
        opacity-30
        hidden
      "
    ></div>

    <header
      class="
        sticky
        top-0
        left-0
        px-6
        py-3
        md:py-4
        flex
        justify-between
        bg-white
        z-30
      "
    >
      <div class="flex z-40">
        <!-- menu toggle -->
        <div id="toggler" class="self-center mr-4 cursor-pointer md:hidden">
          <img
            src="./assets/images/icons/menu-toggler.svg"
            alt=""
            class="w-6"
          />
        </div>

        <!-- logo -->
        <a href="/" class="flex items-center">
          <img
            src="./assets/images/icons/logo-icon.svg"
            alt="Logo"
            class="w-10 md:w-12 mr-2"
          />
          <div class="text-xl md:text-2xl font-bold">Education</div>
        </a>
      </div>

      <!-- nav -->
      <nav
        id="main-nav"
        class="
          md:self-center
          md:static
          md:h-auto
          md:w-auto
          md:bg-transparent
          md:transform-none
          md:transition-none
          grid
          items-center
          absolute
          top-0
          left-0
          w-2/5
          min-w-max
          h-screen
          bg-white
          z-20
          transform
          -translate-x-full
          transition
        "
      >
        <ul class="flex md:flex-row md:mt-0 flex-col items-center px-8">
          <li class="md:mr-14 md:mb-0 mb-16">
            <a href="/" class="hover:text-gray-600 transition">Home</a>
          </li>
          <li class="md:mr-14 md:mb-0 mb-16">
            <a href="#" class="hover:text-gray-600 transition">Library</a>
          </li>
          <li>
            <a href="/about" class="hover:text-gray-600 transition">About</a>
          </li>
        </ul>
      </nav>

      <!-- profile -->
      <div
        id="profile"
        class="
          self-center
          flex
          items-center
          md:border-2
          border-red-500
          rounded-sm
          cursor-pointer
          p-2
        "
      >
        <img
          src="./assets/images/icons/account-icon.svg"
          alt=""
          class="w-9 md:w-8 mr-0 md:mr-1"
        />
        <div class="text-red-500 font-bold uppercase hidden md:block"
          >Sign In</div
        >
      </div>
    </header>

    <main class="flex flex-col mb-8">
      <!-- search bar -->
      <form
        id="search-form"
        class="flex justify-end px-10 my-4"
        autocomplete="off"
        method="GET"
        action="/search"
      >
        <input
          type="text"
          name="query"
          id="search-bar"
          placeholder="Search..."
          class="
            rounded-full
            border-2 border-red-500
            w-72
            max-w-full
            px-5
            py-2
            outline-none
            hidden
          "
        />
        <button type="submit">
          <img
            src="./assets/images/icons/search-icon.svg"
            alt="Search"
            class="h-11 ml-5"
          />
        </button>
      </form>

      <!-- content -->
      <div class="self-center flex justify-center w-4/5 md:w-3/5">
        <div class="flex flex-col w-full mt-3 md:mt-1">
          <!-- embed -->
          <div class="flex justify-center aspect-w-16 aspect-h-9">
            <div class="container">
              <iframe
                src="https://www.youtube.com/embed/<%= video.id %>"
                allowfullscreen
                class="responsive-iframe"
              ></iframe>
            </div>
          </div>

          <!-- details -->
          <div class="mt-5 flex flex-col">
            <!-- title -->
            <p class="font-medium text-2xl"> <%= video.snippet.title %> </p>

            <!-- stats -->
            <div
              class="
                flex
                md:flex-row
                flex-col
                items-start
                md:items-center
                justify-between
                font-normal
                mt-3
              "
            >
              <div class="flex">
                <p class="font-normal" id="view-count">
                  <%= video.statistics.viewCount %> views
                </p>
                <p class="mx-1"> &bull; </p>
                <p class="font-normal" id="publish-date">
                  <% date = new Date(video.snippet.publishedAt) %>
                  <% const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec" ] %>
                  <%= date.getDate() %> <%= monthNames[date.getMonth()] %>, <%= date.getFullYear() %>
                </p>
              </div>

              <div class="flex gap-5">
                <!-- like -->
                <div class="flex cursor-pointer gap-1">
                  <img
                    src="./assets/images/icons/like-icon.svg"
                    alt="likes"
                    class="w-5"
                  />
                  <p>80K</p>
                </div>

                <!-- dislike -->
                <div class="flex cursor-pointer gap-1">
                  <img
                    src="./assets/images/icons/dislike-icon.svg"
                    alt=""
                    class="w-5"
                  />
                  <p>120</p>
                </div>

                <!-- watch later -->
                <div class="flex cursor-pointer gap-1">
                  <img
                    src="./assets/images/icons/watch-later-icon.svg"
                    alt=""
                    class="w-5"
                  />
                  <p class="uppercase">Watch Later</p>
                </div>
              </div>
            </div>

            <!-- Description / Notes toggler -->
            <div class="flex justify-center gap-0 mt-14 mb-10">
              <button
                id="description-toggler"
                class="
                  text-sm
                  py-1
                  w-32
                  border border-red-500
                  rounded-md rounded-r-none
                  cursor-pointer
                  transition
                  bg-white
                  active-tab
                "
                >Description
              </button>
              <button
                id="notes-toggler"
                class="
                  text-sm
                  py-1
                  w-32
                  border border-l-0 border-red-500
                  rounded-md rounded-l-none
                  cursor-pointer
                  bg-white
                  transiton
                "
                >Notes</button
              >
            </div>

            <!-- description -->
            <div id="description" class="flex flex-col-reverse md:flex-row">
              <div class="flex-1 mr-8">
                <div id="video-description-readmore">
                  <% for (const line of video.snippet.description.split("\n")) { %>
                    <p id="video-description" class="my-2">
                      <%= line %>
                    </p>
                  <% } %>
                </div>

                <button class="font-medium text-gray-500" id="read-more">
                  Read More
                </button>
              </div>

              <!-- Subscribe Button -->
              <div
                class="
                  border-b-2 border-gray-200
                  md:border-none
                "
                id="video-description-google"
              >
                <script src="https://apis.google.com/js/platform.js"></script>

                <div
                  id="youtube-subscribe-btn"
                  class="g-ytsubscribe"
                  data-channelid="<%= video.snippet.channelId %>"
                  data-layout="full"
                  data-count="default"
                ></div>
              </div>
            </div>

            <!-- notes -->
            <div class="hidden" id="notes">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam officiis 
              odit quidem doloribus iusto distinctio natus in saepe, ratione itaque illo 
              nesciunt, eius nemo earum ea, ullam delectus atque voluptates veniam magnam 
              cupiditate provident fuga laborum? Voluptate, quam. Nulla odio non modi sit 
              explicabo, velit aspernatur cum, maxime saepe voluptate cumque qui. Cumque eos
              velit qui, nobis, saepe dignissimos molestias temporibus est illo dolorum maxime 
              debitis voluptatibus sunt sed ullam, ipsum delectus eum a eligendi exercitationem natus. 
              Eveniet tempora ullam eum? Iure quaerat autem quia voluptas nemo consequuntur, enim animi 
              neque reprehenderit! Expedita sunt dolore, a omnis quisquam nulla tempora quae laudantium 
              repellat laborum! Enim cumque natus quibusdam aut cupiditate maxime aliquam, veniam, 
              exercitationem magnam consectetur ipsum saepe impedit! Corrupti, necessitatibus 
              consequuntur ipsa rerum provident praesentium blanditiis voluptates asperiores modi
              incidunt est veniam beatae cum quasi ex eligendi laudantium perspiciatis, odio tempore
              officiis ad dignissimos nam quae sunt? Non aliquam voluptates tempora assumenda in eius
              explicabo. Soluta, sed consequatur! Ipsam consequatur sunt maiores, odio quo pariatur 
              distinctio necessitatibus quasi dicta ad quis saepe nam esse. Excepturi quisquam 
              voluptatibus suscipit aperiam perferendis quos veritatis vero impedit, veniam error, 
              possimus quo eaque a omnis consequatur distinctio placeat porro facilis eveniet. Minima, quia?
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- linking js -->
    <script src="./js/navigation.js"></script>
    <script src="./js/video.js"></script>
  </body>
</html>
